---
title: Connecteur Azure Data Lake pour Microsoft Search (recherche Microsoft)
ms.author: monaray
author: monaray97
manager: shohara
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Configurer le connecteur Azure Data Lake Storage Gen2 pour Microsoft Search (recherche Microsoft)
ms.openlocfilehash: 8891c9a1fdf5397c397a941b5131f014db9e7a54
ms.sourcegitcommit: 597c338bf9c1c425747ac74a9a1ae57c5e8957ce
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/21/2021
ms.locfileid: "49920721"
---
# <a name="azure-data-lake-storage-gen2-connector"></a><span data-ttu-id="84363-103">Connecteur Azure Data Lake Storage Gen2</span><span class="sxs-lookup"><span data-stu-id="84363-103">Azure Data Lake Storage Gen2 connector</span></span>

<span data-ttu-id="84363-104">Avec le connecteur Azure Data Lake Storage Gen2, les utilisateurs de votre organisation peuvent rechercher des fichiers stockés dans des comptes de stockage [Blob Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) et [Azure Data Lake Gen 2 Storage.](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction)</span><span class="sxs-lookup"><span data-stu-id="84363-104">With the Azure Data Lake Storage Gen2 connector, users in your organization can search for files stored in [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) and [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) accounts.</span></span>

<span data-ttu-id="84363-105">Cet article est réservé aux administrateurs [Microsoft 365](https://www.microsoft.com/microsoft-365) ou à toute personne qui configure, exécute et surveille un connecteur Azure Data Lake Storage Gen2.</span><span class="sxs-lookup"><span data-stu-id="84363-105">This article is for [Microsoft 365](https://www.microsoft.com/microsoft-365) administrators or anyone who configures, runs, and monitors an Azure Data Lake Storage Gen2 connector.</span></span> <span data-ttu-id="84363-106">Il donne une vue d’ensemble de la configuration, des fonctionnalités, des limitations et des techniques de dépannage du connecteur.</span><span class="sxs-lookup"><span data-stu-id="84363-106">It gives an overview of the connector configuration, capabilities, limitations, and troubleshooting techniques.</span></span> <span data-ttu-id="84363-107">Dans l’article, nous utilisons Le stockage *Azure* comme terme générique pour le stockage [d’objets blob Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) et le stockage Azure Data Lake Gen [2.](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction)</span><span class="sxs-lookup"><span data-stu-id="84363-107">In the article, we use *Azure Storage* as a generic term for [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) and [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction).</span></span>

## <a name="connect-to-a-data-source"></a><span data-ttu-id="84363-108">Connexion à une source de données</span><span class="sxs-lookup"><span data-stu-id="84363-108">Connect to a data source</span></span>

### <a name="primary-storage-connection-string"></a><span data-ttu-id="84363-109">Chaîne de connexion de stockage principale</span><span class="sxs-lookup"><span data-stu-id="84363-109">Primary storage connection string</span></span>

<span data-ttu-id="84363-110">Dans **l’écran Authentification et config,** fournissez la chaîne de connexion de stockage principale.</span><span class="sxs-lookup"><span data-stu-id="84363-110">On the **Authentication and config** screen, provide the Primary Storage Connection String.</span></span> <span data-ttu-id="84363-111">Cette chaîne est nécessaire pour autoriser l’accès à votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="84363-111">That string is required to allow access to your storage account.</span></span> <span data-ttu-id="84363-112">Pour rechercher votre chaîne de connexion, accédez au portail [Azure](https://ms.portal.azure.com/#home) et accédez à la section **Clés** de votre compte de stockage Azure approprié.</span><span class="sxs-lookup"><span data-stu-id="84363-112">To find your connection string, go to the [Azure portal](https://ms.portal.azure.com/#home) and navigate to the **Keys** section of your relevant Azure Storage account.</span></span> <span data-ttu-id="84363-113">Copiez et collez la chaîne de connexion dans le champ approprié à l’écran.</span><span class="sxs-lookup"><span data-stu-id="84363-113">Copy and paste the connection string in the appropriate field on the screen.</span></span>

<span data-ttu-id="84363-114">Si vous ne préférez pas fournir la clé **AccountKey** (un paramètre dans la chaîne de connexion de stockage principale), vous devez accorder l’accès à notre service Graph Connectors pour les rôles suivants.</span><span class="sxs-lookup"><span data-stu-id="84363-114">If you do not prefer to provide the **AccountKey** (a parameter in the primary storage connection string), you will need to grant access to our Graph Connectors Service for the following roles.</span></span> <span data-ttu-id="84363-115">(Cette fonctionnalité est uniquement prise en charge pour le stockage hiérarchique.</span><span class="sxs-lookup"><span data-stu-id="84363-115">(This feature is only supported for hierarchical storage.</span></span> <span data-ttu-id="84363-116">Le stockage blob traditionnel doit fournir AccountKey.)</span><span class="sxs-lookup"><span data-stu-id="84363-116">Traditional Blob storage will have to provide AccountKey.)</span></span>
* <span data-ttu-id="84363-117">Lecteur de données blob de stockage</span><span class="sxs-lookup"><span data-stu-id="84363-117">Storage Blob Data Reader</span></span>
* <span data-ttu-id="84363-118">Collaborateur de données de file d’attente de stockage</span><span class="sxs-lookup"><span data-stu-id="84363-118">Storage Queue Data Contributor</span></span>
* <span data-ttu-id="84363-119">Délégant blob de stockage</span><span class="sxs-lookup"><span data-stu-id="84363-119">Storage Blob Delegator</span></span>

<span data-ttu-id="84363-120">Accédez à **l’onglet Contrôle** d’accès de votre compte de stockage Azure et suivez les instructions ci-après pour accorder l’accès à l’application suivante :</span><span class="sxs-lookup"><span data-stu-id="84363-120">Navigate to the **Access Control** tab of your Azure Storage account, and follow the instructions there to grant access to the following app:</span></span>

* <span data-ttu-id="84363-121">**ID d’application** first party : 56c1da01-2129-48f7-9355-af6d59d42766</span><span class="sxs-lookup"><span data-stu-id="84363-121">**First Party App ID:** 56c1da01-2129-48f7-9355-af6d59d42766</span></span>
* <span data-ttu-id="84363-122">**Nom de l’application de première partie :** Graph Connector Service</span><span class="sxs-lookup"><span data-stu-id="84363-122">**First Party App Name:** Graph Connector Service</span></span>

### <a name="storage-account-and-queue-notifications-optional"></a><span data-ttu-id="84363-123">Notifications de compte de stockage et de file d’attente (facultatif)</span><span class="sxs-lookup"><span data-stu-id="84363-123">Storage account and queue notifications (Optional)</span></span>

<span data-ttu-id="84363-124">La prise en charge du traitement des modifications en temps réel dans le service Graph Connectors peut être ajoutée à l’avenir.</span><span class="sxs-lookup"><span data-stu-id="84363-124">Support to process changes in real time in the Graph Connectors Service might be added in the future.</span></span> <span data-ttu-id="84363-125">Dans ce cas, nous allons surveiller les notifications de modification du stockage Azure stockées dans une file d’attente.</span><span class="sxs-lookup"><span data-stu-id="84363-125">In that case, we'll monitor Azure Storage change notifications stored in a queue.</span></span> <span data-ttu-id="84363-126">Vous devez créer une file d’attente dans le même compte que votre compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="84363-126">You'll need to create a queue in the same account as your Azure Storage account.</span></span>

<span data-ttu-id="84363-127">Après avoir créé une file d’attente, rendez-vous dans l’onglet **Événements** de la page de file d’attente pour configurer **l’abonnement aux événements.**</span><span class="sxs-lookup"><span data-stu-id="84363-127">After you create a queue, go to the **Events** tab on the queue page to configure **Event Subscription**.</span></span> <span data-ttu-id="84363-128">Choisissez tous les événements Blob que la file d’attente recevra et connectez-la au compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="84363-128">Choose all the Blob events that the queue will receive, and connect the queue to the Azure Storage account.</span></span>

## <a name="manage-search-permissions"></a><span data-ttu-id="84363-129">Gérer les autorisations de recherche</span><span class="sxs-lookup"><span data-stu-id="84363-129">Manage search permissions</span></span>

### <a name="azure-data-lake-gen-2"></a><span data-ttu-id="84363-130">Azure Data Lake Gen 2</span><span class="sxs-lookup"><span data-stu-id="84363-130">Azure Data Lake Gen 2</span></span>

<span data-ttu-id="84363-131">Dans l’écran Gérer les **autorisations** de recherche, vous pouvez choisir d’ingèrer les listes de contrôle d’accès à partir de votre compte de stockage [Azure Data Lake Gen 2.](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction)</span><span class="sxs-lookup"><span data-stu-id="84363-131">On the **Manage search permissions** screen, you can choose to ingest the Access Control Lists (ACLs) from your [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) account.</span></span> <span data-ttu-id="84363-132">Lorsque ces autorisations de recherche sont définies, le contenu de recherche est découpé en fonction des autorisations attribuées à l’utilisateur [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) qui recherche le contenu.</span><span class="sxs-lookup"><span data-stu-id="84363-132">When these search permissions are set, search content is trimmed based on the permissions assigned to the signed-in [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) user searching the content.</span></span> <span data-ttu-id="84363-133">Vous pouvez également choisir de rendre tout le contenu indexé à partir de votre compte de stockage visible par tous les membres de votre organisation.</span><span class="sxs-lookup"><span data-stu-id="84363-133">Alternatively, you can choose to make all the content indexed from your storage account visible to everyone in your organization.</span></span> <span data-ttu-id="84363-134">Dans ce cas, tous les membres de votre organisation auront accès à toutes les données de votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="84363-134">In this case, everyone in your organization will have access to all the data in your storage account.</span></span>

### <a name="azure-blob-storage"></a><span data-ttu-id="84363-135">Stockage Blob Azure</span><span class="sxs-lookup"><span data-stu-id="84363-135">Azure Blob Storage</span></span>

<span data-ttu-id="84363-136">Pour une connexion au [stockage Blob Azure,](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction)tout le contenu indexé à partir de la source configurée est visible par tous les membres de votre organisation.</span><span class="sxs-lookup"><span data-stu-id="84363-136">For a connection to [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction), all the content indexed from the configured source is visible to everyone in your organization.</span></span> <span data-ttu-id="84363-137">Les listes de contrôle d’accès ne sont pas pris en charge au niveau blob dans le stockage d’objets blob Azure.</span><span class="sxs-lookup"><span data-stu-id="84363-137">Access control lists are not supported at Blob level in Azure Blob Storage.</span></span>

## <a name="search-permissions"></a><span data-ttu-id="84363-138">Autorisations de recherche</span><span class="sxs-lookup"><span data-stu-id="84363-138">Search permissions</span></span>

<span data-ttu-id="84363-139">Le connecteur Azure Data Lake Storage Gen2  prend en charge les autorisations de recherche visibles par tout le monde ou uniquement par les personnes ayant **accès à cette source de données.**</span><span class="sxs-lookup"><span data-stu-id="84363-139">The Azure Data Lake Storage Gen2 connector supports search permissions visible to **Everyone** or **Only people with access to this data source**.</span></span> <span data-ttu-id="84363-140">Les données indexées qui apparaissent dans les résultats de la recherche peuvent être visibles par tous les utilisateurs de l’organisation ou uniquement par les utilisateurs qui ont accès à chaque élément.</span><span class="sxs-lookup"><span data-stu-id="84363-140">Indexed data that appears in the search results could be visible to all users in the organization or only to users who have access to each item.</span></span>

## <a name="assign-property-labels"></a><span data-ttu-id="84363-141">Attribuer des étiquettes de propriété</span><span class="sxs-lookup"><span data-stu-id="84363-141">Assign property labels</span></span>

<span data-ttu-id="84363-142">Vous pouvez affecter une propriété source à chaque étiquette en choisissant dans un menu d’options.</span><span class="sxs-lookup"><span data-stu-id="84363-142">You can assign a source property to each label by choosing from a menu of options.</span></span> <span data-ttu-id="84363-143">Bien que cette étape ne soit pas obligatoire, le fait d’avoir des étiquettes de propriétés améliorera la pertinence de la recherche et garantira des résultats de recherche plus précis pour les utilisateurs finaux.</span><span class="sxs-lookup"><span data-stu-id="84363-143">While this step is not mandatory, having some property labels will improve the search relevance and ensure more accurate search results for end users.</span></span>

## <a name="manage-schema"></a><span data-ttu-id="84363-144">Gérer le schéma</span><span class="sxs-lookup"><span data-stu-id="84363-144">Manage schema</span></span>

<span data-ttu-id="84363-145">Dans  l’écran Gérer le schéma, vous avez la possibilité de modifier les attributs de schéma **(utilisables** dans une **requête,** utilisables dans une requête, **récupérables** et utilisables dans une recherche dans une recherche) associés aux propriétés, d’ajouter des alias facultatifs et de choisir la propriété **Content.**</span><span class="sxs-lookup"><span data-stu-id="84363-145">On the **Manage Schema** screen, you have the option to change the schema attributes (**queryable**, **searchable**, **retrievable**, and **refinable**) associated with the properties, add optional aliases, and choose the **Content** property.</span></span>

## <a name="set-the-refresh-schedule"></a><span data-ttu-id="84363-146">Définir la planification d’actualisation</span><span class="sxs-lookup"><span data-stu-id="84363-146">Set the refresh schedule</span></span>

<span data-ttu-id="84363-147">Dans **l’écran Paramètres** d’actualisation, vous pouvez définir l’intervalle d’analyse incrémentielle et l’intervalle d’analyse complet.</span><span class="sxs-lookup"><span data-stu-id="84363-147">On the **Refresh Settings** screen, you can set the incremental crawl interval and the full crawl interval.</span></span> <span data-ttu-id="84363-148">Les intervalles par défaut pour le connecteur Azure Data Lake Storage Gen2 sont de 15 minutes pour une analyse incrémentielle et d’une semaine pour une analyse complète.</span><span class="sxs-lookup"><span data-stu-id="84363-148">The default intervals for the Azure Data Lake Storage Gen2 connector are 15 minutes for an incremental crawl and one week for a full crawl.</span></span>

## <a name="limitations"></a><span data-ttu-id="84363-149">Limites</span><span class="sxs-lookup"><span data-stu-id="84363-149">Limitations</span></span>

<span data-ttu-id="84363-150">Une connexion publiée pour le stockage d’objets blob Azure ne peut pas être reconfigurée pour la source Azure Data Lake Storage Gen2 et vice-versa.</span><span class="sxs-lookup"><span data-stu-id="84363-150">A published connection for Azure Blob Storage cannot be reconfigured for Azure Data Lake Storage Gen2 source and vice-versa.</span></span> <span data-ttu-id="84363-151">Dans de tels scénarios, il est recommandé de configurer une nouvelle connexion.</span><span class="sxs-lookup"><span data-stu-id="84363-151">In such scenarios, it is recommended to configure a new connection.</span></span>
