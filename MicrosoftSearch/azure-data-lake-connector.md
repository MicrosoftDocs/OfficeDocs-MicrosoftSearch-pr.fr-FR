---
title: Connecteur Azure Data Lake pour Microsoft Search
ms.author: monaray
author: monaray97
manager: shohara
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Configurer le connecteur Azure Data Lake Storage Gen2 pour Microsoft Search
ms.openlocfilehash: 860c923c62495c7df20152fb530797e390949305
ms.sourcegitcommit: 59cdd3f0f82b7918399bf44d27d9891076090f4f
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/20/2020
ms.locfileid: "49367585"
---
# <a name="azure-data-lake-storage-gen2-connector"></a><span data-ttu-id="d985b-103">Connecteur Azure Data Lake Storage Gen2</span><span class="sxs-lookup"><span data-stu-id="d985b-103">Azure Data Lake Storage Gen2 connector</span></span>

<span data-ttu-id="d985b-104">Avec le connecteur Azure Data Lake Storage Gen2, les utilisateurs de votre organisation peuvent rechercher des fichiers stockés dans les comptes de stockage [BLOB Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) et [Azure Data Lake Gen 2](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) .</span><span class="sxs-lookup"><span data-stu-id="d985b-104">With the Azure Data Lake Storage Gen2 connector, users in your organization can search for files stored in [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) and [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) accounts.</span></span>

<span data-ttu-id="d985b-105">Cet article est destiné aux administrateurs [365 de Microsoft](https://www.microsoft.com/microsoft-365) ou toute personne qui configure, exécute et surveille un connecteur Azure Data Lake Storage Gen2.</span><span class="sxs-lookup"><span data-stu-id="d985b-105">This article is for [Microsoft 365](https://www.microsoft.com/microsoft-365) administrators or anyone who configures, runs, and monitors an Azure Data Lake Storage Gen2 connector.</span></span> <span data-ttu-id="d985b-106">Elle offre une vue d’ensemble de la configuration, des fonctionnalités, des limites et des techniques de résolution des problèmes des connecteurs.</span><span class="sxs-lookup"><span data-stu-id="d985b-106">It gives an overview of the connector configuration, capabilities, limitations, and troubleshooting techniques.</span></span> <span data-ttu-id="d985b-107">Dans cet article, nous utilisons *Azure Storage* comme terme générique pour le stockage d' [objets BLOB Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) et le [stockage Azure Data Lake Gen 2](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction).</span><span class="sxs-lookup"><span data-stu-id="d985b-107">In the article, we use *Azure Storage* as a generic term for [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) and [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction).</span></span>

## <a name="connect-to-a-data-source"></a><span data-ttu-id="d985b-108">Se connecter à une source de données</span><span class="sxs-lookup"><span data-stu-id="d985b-108">Connect to a data source</span></span>

### <a name="primary-storage-connection-string"></a><span data-ttu-id="d985b-109">Chaîne de connexion de stockage principal</span><span class="sxs-lookup"><span data-stu-id="d985b-109">Primary storage connection string</span></span>

<span data-ttu-id="d985b-110">Sur l’écran **authentification et configuration** , fournissez la chaîne de connexion de stockage principal.</span><span class="sxs-lookup"><span data-stu-id="d985b-110">On the **Authentication and config** screen, provide the Primary Storage Connection String.</span></span> <span data-ttu-id="d985b-111">Cette chaîne est requise pour autoriser l’accès à votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="d985b-111">That string is required to allow access to your storage account.</span></span> <span data-ttu-id="d985b-112">Pour rechercher votre chaîne de connexion, accédez au [portail Azure](https://ms.portal.azure.com/#home) et accédez à la section **clés** de votre compte de stockage Azure approprié.</span><span class="sxs-lookup"><span data-stu-id="d985b-112">To find your connection string, go to the [Azure portal](https://ms.portal.azure.com/#home) and navigate to the **Keys** section of your relevant Azure Storage account.</span></span> <span data-ttu-id="d985b-113">Copiez et collez la chaîne de connexion dans le champ approprié à l’écran.</span><span class="sxs-lookup"><span data-stu-id="d985b-113">Copy and paste the connection string in the appropriate field on the screen.</span></span>

<span data-ttu-id="d985b-114">Si vous ne souhaitez pas fournir le **AccountKey** (un paramètre dans la chaîne de connexion de stockage principal), vous devrez accorder l’accès à notre service de connecteurs Graph pour les rôles suivants.</span><span class="sxs-lookup"><span data-stu-id="d985b-114">If you do not prefer to provide the **AccountKey** (a parameter in the primary storage connection string), you will need to grant access to our Graph Connectors Service for the following roles.</span></span>

* <span data-ttu-id="d985b-115">Lecteur de données BLOB de stockage</span><span class="sxs-lookup"><span data-stu-id="d985b-115">Storage Blob Data Reader</span></span>
* <span data-ttu-id="d985b-116">Collaborateur de données de file d’attente de stockage</span><span class="sxs-lookup"><span data-stu-id="d985b-116">Storage Queue Data Contributor</span></span>
* <span data-ttu-id="d985b-117">Délégation du blob de stockage (uniquement pour le stockage hiérarchique)</span><span class="sxs-lookup"><span data-stu-id="d985b-117">Storage Blob Delegator (only for hierarchical storage)</span></span>

<span data-ttu-id="d985b-118">Accédez à l’onglet **contrôle d’accès** de votre compte de stockage Azure et suivez les instructions pour accorder l’accès à l’application suivante :</span><span class="sxs-lookup"><span data-stu-id="d985b-118">Navigate to the **Access Control** tab of your Azure Storage account, and follow the instructions there to grant access to the following app:</span></span>

* <span data-ttu-id="d985b-119">**ID de l’application du premier groupe :** 56c1da01-2129-48f7-9355-af6d59d42766</span><span class="sxs-lookup"><span data-stu-id="d985b-119">**First Party App ID:** 56c1da01-2129-48f7-9355-af6d59d42766</span></span>
* <span data-ttu-id="d985b-120">**Nom de l’application de premier tiers :** Service connecteur Graph</span><span class="sxs-lookup"><span data-stu-id="d985b-120">**First Party App Name:** Graph Connector Service</span></span>

### <a name="storage-account-and-queue-notifications-optional"></a><span data-ttu-id="d985b-121">Compte de stockage et notifications de file d’attente (facultatif)</span><span class="sxs-lookup"><span data-stu-id="d985b-121">Storage account and queue notifications (Optional)</span></span>

<span data-ttu-id="d985b-122">Le support pour traiter les modifications en temps réel dans le service de connecteurs Graph peut être ajouté à l’avenir.</span><span class="sxs-lookup"><span data-stu-id="d985b-122">Support to process changes in real time in the Graph Connectors Service might be added in the future.</span></span> <span data-ttu-id="d985b-123">Dans ce cas, nous allons analyser les notifications de modification de stockage Azure stockées dans une file d’attente.</span><span class="sxs-lookup"><span data-stu-id="d985b-123">In that case, we'll monitor Azure Storage change notifications stored in a queue.</span></span> <span data-ttu-id="d985b-124">Vous devez créer une file d’attente dans le même compte que votre compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="d985b-124">You'll need to create a queue in the same account as your Azure Storage account.</span></span>

<span data-ttu-id="d985b-125">Après avoir créé une file d’attente, accédez à l’onglet **événements** sur la page de la file d’attente pour configurer l' **abonnement aux événements**.</span><span class="sxs-lookup"><span data-stu-id="d985b-125">After you create a queue, go to the **Events** tab on the queue page to configure **Event Subscription**.</span></span> <span data-ttu-id="d985b-126">Choisissez tous les événements BLOB que la file d’attente recevra et connectez la file d’attente au compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="d985b-126">Choose all the Blob events that the queue will receive, and connect the queue to the Azure Storage account.</span></span>

## <a name="manage-search-permissions"></a><span data-ttu-id="d985b-127">Gérer les autorisations de recherche</span><span class="sxs-lookup"><span data-stu-id="d985b-127">Manage search permissions</span></span>

### <a name="azure-data-lake-gen-2"></a><span data-ttu-id="d985b-128">Azure Data Lake Gen 2</span><span class="sxs-lookup"><span data-stu-id="d985b-128">Azure Data Lake Gen 2</span></span>

<span data-ttu-id="d985b-129">Dans l’écran gérer les autorisations de recherche, vous pouvez choisir d' **administrer** les listes de contrôle d’accès (ACL) de votre compte de [stockage Azure Data Lake Gen 2](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) .</span><span class="sxs-lookup"><span data-stu-id="d985b-129">On the **Manage search permissions** screen, you can choose to ingest the Access Control Lists (ACLs) from your [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) account.</span></span> <span data-ttu-id="d985b-130">Lorsque ces autorisations de recherche sont définies, le contenu de recherche est tronqué en fonction des autorisations attribuées à l’utilisateur [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) connecté à rechercher dans le contenu.</span><span class="sxs-lookup"><span data-stu-id="d985b-130">When these search permissions are set, search content is trimmed based on the permissions assigned to the signed-in [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) user searching the content.</span></span> <span data-ttu-id="d985b-131">Vous pouvez également choisir de faire en sorte que tout le contenu indexé à partir de votre compte de stockage soit visible par tous les membres de votre organisation.</span><span class="sxs-lookup"><span data-stu-id="d985b-131">Alternatively, you can choose to make all the content indexed from your storage account visible to everyone in your organization.</span></span> <span data-ttu-id="d985b-132">Dans ce cas, tous les membres de votre organisation auront accès à toutes les données de votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="d985b-132">In this case, everyone in your organization will have access to all the data in your storage account.</span></span>

### <a name="azure-blob-storage"></a><span data-ttu-id="d985b-133">Stockage Blob Azure</span><span class="sxs-lookup"><span data-stu-id="d985b-133">Azure Blob Storage</span></span>

<span data-ttu-id="d985b-134">Pour une connexion au [stockage BLOB Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction), tout le contenu indexé à partir de la source configurée est visible par tous les utilisateurs de votre organisation.</span><span class="sxs-lookup"><span data-stu-id="d985b-134">For a connection to [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction), all the content indexed from the configured source is visible to everyone in your organization.</span></span> <span data-ttu-id="d985b-135">Les listes de contrôle d’accès ne sont pas prises en charge au niveau BLOB dans le stockage BLOB Azure.</span><span class="sxs-lookup"><span data-stu-id="d985b-135">Access control lists are not supported at Blob level in Azure Blob Storage.</span></span>

## <a name="manage-search-permissions"></a><span data-ttu-id="d985b-136">Gérer les autorisations de recherche</span><span class="sxs-lookup"><span data-stu-id="d985b-136">Manage search permissions</span></span>

<span data-ttu-id="d985b-137">Le connecteur Azure Data Lake Storage Gen2 prend en charge les autorisations de recherche visibles par **tous** **les utilisateurs ou uniquement les personnes ayant accès à cette source de données**.</span><span class="sxs-lookup"><span data-stu-id="d985b-137">The Azure Data Lake Storage Gen2 connector supports search permissions visible to **Everyone** or **Only people with access to this data source**.</span></span> <span data-ttu-id="d985b-138">Les données indexées qui apparaissent dans les résultats de la recherche peuvent être visibles par tous les utilisateurs de l’organisation ou uniquement pour les utilisateurs qui ont accès à chaque élément.</span><span class="sxs-lookup"><span data-stu-id="d985b-138">Indexed data that appears in the search results could be visible to all users in the organization or only to users who have access to each item.</span></span>

## <a name="assign-property-labels"></a><span data-ttu-id="d985b-139">Affecter des étiquettes de propriété</span><span class="sxs-lookup"><span data-stu-id="d985b-139">Assign property labels</span></span>

<span data-ttu-id="d985b-140">Vous pouvez affecter une propriété source à chaque étiquette en choisissant dans un menu d’options.</span><span class="sxs-lookup"><span data-stu-id="d985b-140">You can assign a source property to each label by choosing from a menu of options.</span></span> <span data-ttu-id="d985b-141">Si cette étape n’est pas obligatoire, le fait d’avoir des étiquettes de propriété améliore la pertinence de la recherche et garantit des résultats de recherche plus précis pour les utilisateurs finaux.</span><span class="sxs-lookup"><span data-stu-id="d985b-141">While this step is not mandatory, having some property labels will improve the search relevance and ensure more accurate search results for end users.</span></span>

## <a name="manage-schema"></a><span data-ttu-id="d985b-142">Gérer le schéma</span><span class="sxs-lookup"><span data-stu-id="d985b-142">Manage schema</span></span>

<span data-ttu-id="d985b-143">Dans l' **écran gérer le schéma** , vous avez la possibilité de modifier les attributs de schéma (**Queryable**, pouvant faire l’objet d’une **recherche**, l' **extraction** et l' **refinable**) associés aux propriétés, d’ajouter des alias facultatifs et de choisir la propriété **content** .</span><span class="sxs-lookup"><span data-stu-id="d985b-143">On the **Manage Schema** screen, you have the option to change the schema attributes (**queryable**, **searchable**, **retrievable**, and **refinable**) associated with the properties, add optional aliases, and choose the **Content** property.</span></span>

## <a name="set-the-refresh-schedule"></a><span data-ttu-id="d985b-144">Définir la planification d’actualisation</span><span class="sxs-lookup"><span data-stu-id="d985b-144">Set the refresh schedule</span></span>

<span data-ttu-id="d985b-145">Dans l’écran **paramètres d’actualisation** , vous pouvez définir l’intervalle d’analyse incrémentielle et l’intervalle d’analyse complète.</span><span class="sxs-lookup"><span data-stu-id="d985b-145">On the **Refresh Settings** screen, you can set the incremental crawl interval and the full crawl interval.</span></span> <span data-ttu-id="d985b-146">Les intervalles par défaut du connecteur Azure Data Lake Storage Gen2 sont 15 minutes pour une analyse incrémentielle et une semaine pour une analyse complète.</span><span class="sxs-lookup"><span data-stu-id="d985b-146">The default intervals for the Azure Data Lake Storage Gen2 connector are 15 minutes for an incremental crawl and one week for a full crawl.</span></span>

## <a name="limitations"></a><span data-ttu-id="d985b-147">Limites</span><span class="sxs-lookup"><span data-stu-id="d985b-147">Limitations</span></span>

<span data-ttu-id="d985b-148">Une connexion publiée pour Azure BLOB Storage ne peut pas être reconfigurée pour Azure Data Lake Storage Gen2 source et inversement.</span><span class="sxs-lookup"><span data-stu-id="d985b-148">A published connection for Azure Blob Storage cannot be reconfigured for Azure Data Lake Storage Gen2 source and vice-versa.</span></span> <span data-ttu-id="d985b-149">Dans ce cas, il est recommandé de configurer une nouvelle connexion.</span><span class="sxs-lookup"><span data-stu-id="d985b-149">In such scenarios, it is recommended to configure a new connection.</span></span>
